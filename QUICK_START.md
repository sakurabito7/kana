# 入園管理システム - クイックスタートガイド

## はじめに

このガイドでは、入園管理システム（Web版）を最短で起動し、基本的な操作を確認する手順を説明します。

## 前提条件

- Python 3.8 以上がインストールされていること
- Webブラウザ（Chrome, Firefox, Edge など）

## 5分で始める

### ステップ 1: ディレクトリへ移動

```bash
cd entry-management-web
```

### ステップ 2: 依存パッケージをインストール

```bash
pip install -r requirements.txt
```

### ステップ 3: サーバーを起動

```bash
python app.py
```

以下のような表示が出れば成功です：

```
データベーステーブルを初期化しました
サーバーを起動します: http://0.0.0.0:5000
イントラネット内の他のPCからアクセス可能です
 * Running on http://127.0.0.1:5000
 * Running on http://192.168.1.4:5000
```

### ステップ 4: ブラウザでアクセス

ブラウザを開いて以下のURLにアクセス：

```
http://localhost:5000
```

または

```
http://127.0.0.1:5000
```

## 基本操作チュートリアル

### 1. テストデータの登録

#### 画面上部の「チケット管理」をクリック

#### 以下の情報を入力：
- **TKT番号**: 1234
- **年齢**: 25
- **性別**: 男性
- **券種**: 大人
- **使用開始日**: 今日の日付を選択
- **備考**: テストユーザー（任意）

#### 「新規登録」ボタンをクリック

成功すると「チケットを登録しました」というメッセージが表示されます。

### 2. 入場判定テスト

#### 画面上部の「入場判定」をクリックしてメイン画面へ

#### 入力フィールドに「1234」を入力してEnterキー

結果が表示されます：
- **入園確認**: OK
- **TKT番号**: 1234
- **有効期限**: 1年後の日付
- **券種**: 大人
- **性別**: 男性
- **年齢**: 25

下の「判定結果一覧」テーブルにも履歴が記録されます。

### 3. 入場回数制限の確認

#### もう一度「1234」を入力してEnter（2回目）

まだ「OK」が表示されます。

#### もう一度「1234」を入力してEnter（3回目）

今度は「NG (本日、入場回数2回以上)」が表示されます。

✅ これで入場回数制限が正しく動作していることが確認できました！

### 4. 履歴確認

#### 画面上部の「履歴管理」をクリック

これまでの入場履歴が一覧表示されます：
- ID
- TKT番号
- 入園時間
- 判定結果（OK/NG）
- コメント

### 5. データエクスポート

#### メイン画面に戻り、「データ出力」ボタンをクリック

入園履歴がCSV形式でダウンロードされます。
ExcelやGoogleスプレッドシートで開いて確認できます。

## イントラネット内の他のPCからアクセス

### サーバーのIPアドレスを確認

サーバー起動時に表示されるIPアドレスを確認：

```
 * Running on http://192.168.1.4:5000
                    ^^^^^^^^^^^^^^^^
                    このIPアドレスをメモ
```

### 他のPCのブラウザで開く

```
http://192.168.1.4:5000
```

※ IPアドレスは環境によって異なります

## トラブルシューティング

### Q: ブラウザで「このページに到達できません」と表示される

**A**: 以下を確認してください：
1. サーバーが起動しているか（コマンドプロンプトを確認）
2. URLが正しいか（http://localhost:5000 または http://127.0.0.1:5000）
3. 別のブラウザで試す
4. ファイアウォールがブロックしていないか

### Q: 「pip install」でエラーが出る

**A**: Python 3.8以上がインストールされているか確認：
```bash
python --version
```

または

```bash
python3 --version
```

### Q: ポート5000が既に使用されている

**A**: `config.py` でポート番号を変更：
```python
PORT = 5001  # 別のポート番号に変更
```

### Q: 他のPCからアクセスできない

**A**: 以下を確認：
1. 同じネットワークに接続しているか
2. Windowsファイアウォールでポート5000が開放されているか
3. サーバーのIPアドレスが正しいか

## サーバーの停止

コマンドプロンプトで `Ctrl + C` を押すとサーバーが停止します。

## 次のステップ

基本操作が確認できたら、以下のドキュメントも参照してください：

- **README.md**: 詳細な使い方・機能説明
- **SPECIFICATION.md**: システム仕様書
- **IMPLEMENTATION_PLAN.md**: 実装計画・技術詳細

## サンプルCSVデータ

CSV一括登録を試す場合は、以下の内容でCSVファイルを作成してください：

```csv
TKT番号,年齢,性別,券種,使用開始日,備考
1001,30,男性,大人,2025/11/24,サンプル1
1002,8,女性,子供,2025/11/24,サンプル2
1003,45,女性,大人,2025/11/24,サンプル3
1004,12,男性,子供,2025/11/24,サンプル4
1005,65,それ以外,大人,2025/11/24,サンプル5
```

ファイル名: `sample_tickets.csv`
文字コード: UTF-8（BOM付き推奨）

## よくある質問

### Q: データベースはどこに保存されますか？

**A**: `entry-management-web` ディレクトリに `entry_management.db` というファイルが作成されます。

### Q: バックアップはどうすればいいですか？

**A**: `entry_management.db` ファイルをコピーするだけでOKです。

### Q: データを消去してやり直したい

**A**: サーバーを停止して、`entry_management.db` ファイルを削除してから再起動してください。

### Q: 複数人で同時に使えますか？

**A**: はい、イントラネット内の複数のPCから同時にアクセスできます（推奨: 10台まで）。

## まとめ

おめでとうございます！入園管理システムの基本操作を完了しました。

**確認できたこと**:
- ✅ サーバーの起動
- ✅ チケットの登録
- ✅ 入場判定
- ✅ 入場回数制限
- ✅ 履歴管理
- ✅ データエクスポート

これで実際の運用を開始できます。

---

**ヘルプが必要な場合**: README.md を参照するか、開発チームにお問い合わせください。
